为了实现不同用户的识别和显示消息的发送者，我们需要在消息传递时包含用户信息。以下是如何实现这一功能的详细步骤：

### 修改后的代码

#### 前端：`index.html`

在前端，用户需要输入用户名，并在发送消息时将用户名和消息一起发送到服务器。

#### 后端：`ChatHandler.java`

在后端，解析收到的消息并将其包含用户名和消息一起广播给所有客户端。

### 解析

#### 前端

1. **新增输入框 `#username`**：
   - 用户输入自己的用户名。
2. **修改 `sendMessage` 函数**：
   - 获取用户名和消息内容。
   - 将用户名和消息内容封装成一个对象，并将其转换为 JSON 字符串发送到服务器。
3. **修改 `socket.onmessage` 事件处理函数**：
   - 接收到消息后，解析 JSON 数据，提取用户名和消息内容。
   - 显示格式为 `username: message`。

#### 后端

1. **新增 `ObjectMapper`**：
   - 用于解析和生成 JSON 数据。
2. **修改 `handleTextMessage` 方法**：
   - 解析收到的 JSON 数据，提取用户名和消息内容。
   - 将用户名和消息内容封装成 JSON 字符串，并广播给所有连接的客户端。

### 运行流程

1. **用户输入用户名和消息**：
   - 用户在前端输入用户名和消息内容。
2. **发送消息**：
   - 用户点击发送按钮，`sendMessage` 函数被调用。
   - 用户名和消息内容被封装成 JSON 字符串，通过 WebSocket 发送到服务器。
3. **服务器处理消息**：
   - 服务器接收到消息，解析 JSON 数据，提取用户名和消息内容。
   - 将用户名和消息内容重新封装成 JSON 字符串，并广播给所有连接的客户端。
4. **客户端接收消息**：
   - 所有客户端接收到消息，解析 JSON 数据，提取用户名和消息内容。
   - 将消息内容显示在聊天窗口中，格式为 `username: message`。

通过这种方式，你可以实现前端和后端之间的用户名和消息的传递和显示，使得每条消息都能显示其发送者的用户名。

为了实现类似于微信的聊天界面，其中自己的消息在右边，别人的消息在左边，我们可以使用 CSS 的 `flexbox` 布局和不同的样式类来实现

### 解析

#### HTML 结构

1. **`#chat-container`**：
   - 整个聊天界面的容器。
2. **`#chat`**：
   - 显示聊天消息的区域。
3. **`#message-container`**：
   - 包含用户名输入框、消息输入框和发送按钮。
4. **用户名输入框 `#username`** 和 **消息输入框 `#message`**：
   - 用户输入消息和用户名的地方。
5. **发送按钮**：
   - 触发消息发送的按钮。

#### CSS 样式

1. **`.message`**：
   - 基本消息样式，包括间距、填充、圆角、最大宽度和单词换行。
2. **`.message.left`**：
   - 别人发送的消息样式，背景为浅灰色，左对齐。
3. **`.message.right`**：
   - 自己发送的消息样式，背景为蓝色，右对齐，文字为白色。

#### JavaScript

1. **`currentUser` 变量**：
   - 用于存储当前用户的用户名。
2. **`socket.onmessage` 事件处理函数**：
   - 接收从服务器发送来的消息。
   - 根据消息的发送者（用户名）确定消息的样式（左对齐或右对齐）。
3. **`sendMessage` 函数**：
   - 获取输入的用户名和消息内容。
   - 将消息发送到服务器。
   - 设置 `currentUser` 为当前输入的用户名。

### 总结

通过以上改动，你的聊天界面现在可以实现类似微信的消息布局，自己的消息在右边，别人的消息在左边。CSS 样式和 JavaScript 逻辑的结合，使得消息在界面上的呈现更加清晰和有条理。